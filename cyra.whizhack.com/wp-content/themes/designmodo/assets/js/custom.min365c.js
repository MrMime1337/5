jQuery(document).ready(function($){var b=["#subscribe_newsletter_module","#subscribe_newsletter_page","#subscribe_jobs_page","#subscribe_article_module","#subscribe_newsletter_footer"],d="is_subscriber";$(".email_address_field").on("keydown blur change click mouseover",function(){$(this).val().match(/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i)?$(this).addClass("valid"):$(this).removeClass("valid")}),$(b.join(", ")).on("submit",function(d){var a=$(this).find(".email_address_field"),b=$(this).find(".acceptance"),c=$(this);return""===a.val()?(a.focus(),!1):($.ajax({type:"POST",url:dm_vars.ajax_url,data:{email:a.val(),acceptance:"subscribe_newsletter_footer"===c.attr("id")?"Y":b.is(":checked")?"Y":"N",action:"dm_newsletter_subscribe"},success:function(a){if(a.success)switch(c.attr("id")){case"subscribe_newsletter_module":c.parents("article").animate({height:"100px"}).addClass("success");break;case"subscribe_newsletter_page":case"subscribe_jobs_page":case"subscribe_article_module":c.addClass("subscribed").find('[type="submit"]').html("\u2713").addClass("green");break;case"subscribe_newsletter_footer":c.addClass("subscribed").find('[type="submit"]').html("\u2713").removeClass("blue").addClass("green");break;default:alert(a.data)}else{if("Email is required and must be valid."===a.data)return;switch(c.attr("id")){case"subscribe_newsletter_module":c.parents("article").attr("data-alert-message",a.data);break;case"subscribe_newsletter_page":case"subscribe_jobs_page":case"subscribe_newsletter_footer":c.attr("data-alert-message",a.data);break;case"subscribe_article_module":c.find("#email-error").text(a.data).hide().show();break;default:alert(a.data)}}},dataType:"json"}),!1)});var c=$(b[0]).parents("article");Cookies.get(d)&&c.hide(),c.on("click",".hideSubscribe",function(){Cookies.set(d,1,{expires:30}),$(this).parents("article").slideUp(500,function(){$(this).remove()})}),$("#confirm_email_sign_up_page, #confirm_email_homepage_top, #confirm_email_homepage_middle, #confirm_email_homepage_bottom").on("submit",function(d){var a=$(this).find(".email_address_field"),b=$(this).find(".acceptance"),c=$(this);return""===a.val()?(a.focus(),!1):"confirm_email_sign_up_page"!==c.attr("id")||($(".woocommerce-error").remove(),b.is(":checked"))?($.ajax({type:"POST",url:dm_vars.ajax_url,data:{email:a.val(),acceptance:"confirm_email_sign_up_page"===c.attr("id")?b.is(":checked")?"Y":"N":"Y",action:"dm_onboarding_confirm_email"},beforeSend:function(){switch(c.attr("id")){case"confirm_email_homepage_top":case"confirm_email_homepage_middle":case"confirm_email_homepage_bottom":c.addClass("loading").find('button[type="submit"]').blur()}},success:function(a){if(a.success)switch(c.attr("id")){case"confirm_email_homepage_top":case"confirm_email_homepage_middle":case"confirm_email_homepage_bottom":window.location.href="/my-account/sign-up/?confirm-email-sent";break;case"confirm_email_sign_up_page":$(".step-1").addClass("step-is-hidden"),$(".step-1-successful").removeClass("step-is-hidden");break;default:alert(a.data)}else switch(c.attr("id")){case"confirm_email_homepage_top":case"confirm_email_homepage_middle":case"confirm_email_homepage_bottom":c.attr("data-alert-message",a.data),c.removeClass("loading");break;case"confirm_email_sign_up_page":$(f([a.data])).insertBefore(c);break;default:alert(a.data)}},dataType:"json"}),!1):(b.focus(),$(f(["Please accept the privacy checkbox."])).insertBefore(c),!1)}),$(".onboarding .register").on("submit",function(c){c.preventDefault();var a=$(this),d={action:"dm_onboarding_sign_up"};$.each(a.serializeArray(),function(b,a){d[a.name]=a.value}),$(".woocommerce-error").remove();var b=$(this).find(".acceptance");return b.is(":checked")?($.ajax({type:"POST",url:dm_vars.ajax_url,data:d,success:function(b){b.success?($(".step-2").addClass("step-is-hidden"),$(".step-3").removeClass("step-is-hidden"),$(window).trigger("resize")):$(f([b.data])).insertBefore(a)},dataType:"json"}),!1):(b.focus(),$(f(["Please accept the privacy checkbox."])).insertBefore(a),!1)}),$("body").on("click","[data-href]",function(){if(!$(this).hasClass("skip-this-event"))return window.location.href=$(this).data("href"),!1});var f=function(a){var b='<ul class="woocommerce-error error" role="alert">';return $.each(a,function(c,a){b+="<li><strong>Error:</strong> "+a+"</li>"}),b+="</ul>"},a=$("#dm_contact_form_1");a.on("submit",function(b){b.preventDefault();var c=a.parent().find("#message"),d=a.find("#submit");c.empty(),d.attr("disabled","disabled"),$.ajax({type:"post",url:dm_vars.ajax_url,data:a.serialize()+"&action=dm_contact",success:function(b){c.html(b.data).slideDown(),b.success&&a.slideUp(),d.removeAttr("disabled")}})});var e=["startup-support","slides-support","postcards-support","staticpages-support"];a.length>0&& -1!==$.inArray(a.find("#subject").val(),e)&&a.find("#order_number_container").show(),a.on("change","#subject",function(){-1!==$.inArray($(this).val(),e)?a.find("#order_number_container").show():a.find("#order_number_container").hide()})})